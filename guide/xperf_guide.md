## Руководство по работе с Xperf

- Установите Xperf при помощи [adksetup](https://learn.microsoft.com/en-us/windows-hardware/get-started/adk-install)

- Скачайте скрипт [xperf-dpcisr.bat](https://github.com/Seniroad/Computer-RU-Setup-guide/blob/main/files/xperf-test-script.bat)

- После выполнения скрипта откройте файл report.txt или файл трейса (.etl) для более расширенного просмотра (в этом гайде не будет части для .etl, так как для 90% читателей это ненужная информация)


## Объяснение

- Время выполнения DPC или прерывания в компьютере измеряется в us (Микросекундах), так что это не миллисекунды, как вы могли видеть в плацебных программах.

- ```CPU Usage from 0 us to ХХХХХХХ us``` - общее время нагрузки ЦП

- ```CPU 0 Usage,      CPU 1 Usage,      CPU 2 Usage  и т.д.``` - Указания ядра для столбца 
	
	- Учитывайте HT и CCD/CCX и E-ядра

- ```Module``` (CLASSPNP.SYS, Wdf01000.sys, dxgkrnl.sys и другие) - драйвер к которому принадлежит DPC

- ```0 usecs AND <=  1 usecs``` - 0 микросекунд и меньше 1 микросекунды

	- То есть эта операция занимает время в районе от 0-1 микросекунды (включительно)

- ```Total = 4107``` - Всего DPC/прерываний от модуля


## Главное

- DPC и прерывания модуля должны быть на одном  физичческом ядре.

- DPC и прерывания должны быть распределены по физическим ядрам и не пересекаться между собой.

- Исключением может быть только SATA или PCI интерфейс SSD, обычно он должен распределятся на все ядра.